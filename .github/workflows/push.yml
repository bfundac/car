
name: Push to Replicate

on:

  push:

    branches: [ "main" ]

    paths:

      - "**"

      - "!.github/workflows/test.yml"



jobs:

  push_to_replicate:

    runs-on: ubuntu-latest

    steps:

      - name: Free Disk Space

        uses: jlumbroso/free-disk-space@main

        with:

          tool-cache: false

          docker-images: false

          

      - name: Checkout

        uses: actions/checkout@v4



      - name: Setup Cog

        uses: replicate/setup-cog@v2

        with:

          token: ${{ secrets.REPLICATE_API_TOKEN }}



      - name: Push to Replicate

        # 替换成你自己的 Replicate 模型地址 (例如 r8.im/yourname/car-flux)

        run: cog push r8.im/bfundac/car-pipeline

